(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"8yaA":function(t,a,e){"use strict";e.r(a);var o=e("3fBN"),s={components:{Alert:e("z80y").a},data:function(){return{acta:{id:null,codigo:null,junta_id:null,total_votantes:0,tv_1:0,tv_2:0,tv_3:0,votos_blancos:0,vb_1:0,vb_2:0,vb_3:0,votos_nulos:0,vn_1:0,vn_2:0,vn_3:0,estado:0,ingresada_por:!0},candidatos_votos:[],image:null,processing:!1,errorMessage:null,infoVotosValidos:null,candidatos:[],sumaTotal:0,votos_candidatos:0,alert:!0,stop:0}},created:function(){this.fetchJunta()},computed:{user:function(){var t=window.localStorage.getItem("user");return JSON.parse(t)},token:function(){return window.localStorage.getItem("token")}},methods:{calcularTotalVotantes:function(t){var a=this.acta.tv_1+this.acta.tv_2+this.acta.tv_3;this.acta.total_votantes=parseInt(a)},calcularTotalBlancos:function(t){var a=this.acta.vb_1+this.acta.vb_2+this.acta.vb_3;this.acta.votos_blancos=parseInt(a)},calcularTotalNulos:function(t){var a=this.acta.vn_1+this.acta.vn_2+this.acta.vn_3;this.acta.votos_nulos=parseInt(a)},calcularSumaTotal:function(){return this.votos_candidatos=this.candidatos_votos.reduce((function(t,a){return t+a.votos}),0),this.sumaTotal=this.votos_candidatos+(this.acta.votos_blancos+this.acta.votos_nulos),this.infoVotosValidos="",this.sumaTotal==this.acta.total_votantes||(this.infoVotosValidos="Esta acta puede estar inconsistente, revisar que todo este correcto, dar click en Guardar, y luego Guardar acta inconsistente.",!1)},calcularVotoCandidato:function(t){var a=this.candidatos_votos[t].v_1+this.candidatos_votos[t].v_2+this.candidatos_votos[t].v_3;this.candidatos_votos[t].votos=parseInt(a),this.infoVotosValidos=""},fetchJunta:function(){var t=this;this.processing=!0,o.a.get("control-electoral/last-acta",{params:{user:this.user.id},headers:{Authorization:"Bearer ".concat(this.token),"Content-Type":"application/json"}}).then((function(a){var e=null,o=null;a.data.status?(t.acta=a.data.acta,t.acta.tv_1=0,t.acta.tv_2=0,t.acta.tv_3=0,t.acta.vb_1=0,t.acta.vb_2=0,t.acta.vb_3=0,t.acta.vn_1=0,t.acta.vn_2=0,t.acta.vn_3=0,e=t.acta.id,o=t.user.id):(t.stop++,t.showNoActas()),t.candidatos=a.data.candidatos,t.candidatos_votos=a.data.candidatos.map((function(t){return{candidato_id:t.id,acta_id:e,v_1:0,v_2:0,v_3:0,votos:0,procesada_por:o}})),t.processing=!1})).catch((function(a){console.log(a),t.errorMessage=a,t.processing=!1}))},addVoto:function(t){var a=this,e="Ok Guardar",o="";this.calcularSumaTotal()||(o='<p class="text-red-500">Esta es una Acta Inconsistente porque el el Total de Votantes no coincide con el Total votos, por favor revisar. </p>\n                <p class="text-blue-900"> Si ya lo hizo, puede dar click en Guardar acta inconsistente</p>',e="Guardar acta inconsistente",this.acta.inconsistente=!0),this.$swal({title:"Resumen",position:"top-end",allowOutsideClick:!1,text:"POR FAVOR INFORMA ÉSTE PROBLEMA A UN ADMINISTRADOR",html:'<div class="text-negro">\n                        <table class="w-full text-sm text-left">\n                            <tr class="border-blanco dark:bg-blanco dark:border-gray-700 text-center">\n                                <th class="border border-curren text-lg" colspan="2">ACTA '.concat(this.acta.codigo,' </th>\n                            </tr>\n                            <tr class="border-blanco dark:bg-blanco dark:border-gray-700 ').concat(this.sumaTotal!=this.acta.total_votantes?"bg-red-50":"bg-lime-50",' ">\n                                <td class="border border-curren text-lg">Total de Votantes</td>\n                                <td class="border border-curren text-lg"> ').concat(this.acta.total_votantes,' </td>\n                            </tr>\n                            <tr class="border-blanco dark:bg-blanco dark:border-gray-700">\n                                <td class="border border-curren text-lg">Votos Blancos</td>\n                                <td class="border border-curren text-lg"> ').concat(this.acta.votos_blancos,' </td>\n                            </tr>\n                            <tr class="border-blanco dark:bg-blanco dark:border-gray-700">\n                                <td class="border border-curren text-lg">Votos Nulos</td>\n                                <td class="border border-curren text-lg"> ').concat(this.acta.votos_nulos,' </td>\n                            </tr>\n                            <tr class="border-blanco dark:bg-blanco dark:border-gray-700">\n                                <td class="border border-curren text-lg">Votos Candidatos</td>\n                                <td class="border border-curren text-lg"> ').concat(this.votos_candidatos,' </td>\n                            </tr>\n                            <tr class="border-blanco dark:bg-blanco dark:border-gray-700 ').concat(this.sumaTotal!=this.acta.total_votantes?"bg-red-50":"bg-lime-50",'">\n                                <td class="border border-curren text-lg">Total Votos</td>\n                                <td class="border border-curren text-lg"> ').concat(this.sumaTotal,' </td>\n                            </tr>\n                        </table>\n                        <div class="text-sm text-justify w-full">\n                            ').concat(o,"\n                        </div>\n                <div>"),confirmButtonText:e,showCancelButton:!0,cancelButtonText:"Cancelar"}).then((function(e){e.isConfirmed?a.save(t):e.isDenied&&a.$swal("Changes are not saved","","info")}))},save:function(t){var a=this;this.processing=!0,delete this.acta.imagenURL,delete this.acta.media,this.candidatos_votos=this.candidatos_votos.map((function(t){return{candidato_id:t.candidato_id,acta_id:t.acta_id,votos:t.votos,procesada_por:t.procesada_por}}));var e={acta:this.acta,candidatos_votos:this.candidatos_votos};o.a.put("control-electoral/actas/".concat(this.acta.id),e,{headers:{Authorization:"Bearer ".concat(this.token),"Content-Type":"application/json"}}).then((function(e){e.data.status?(t.target.reset(),a.fetchJunta(),a.showSucces(),a.sumaTotal=0,a.infoVotosValidos=""):(t.target.reset(),a.infoVotosValidos="",a.showWarning(e.data.msg)),a.processing=!1})).catch((function(t){console.log(t),a.errorMessage=t,a.processing=!1}))},showNoActas:function(){var t,a=this;this.$swal({title:"Aun no existe actas para revisar los votos!",html:"".concat(1==this.stop?"<p> Por favor espere </p>":'<p class="text-blue-900"> Por favor espere, intentaremos buscar actas una vez más </p>'," "),timer:6e4,timerProgressBar:!0,didOpen:function(){a.$swal.showLoading(),t=setInterval((function(){var t=(a.$swal.getTimerLeft()/6e4).toFixed(0),e=(a.$swal.getTimerLeft()/1e3).toFixed(0);minutos.textContent=t,segundos.textContent=e,0==t&&1==a.stop&&a.fetchJunta()}),1e3)},willClose:function(){clearInterval(t)}}).then((function(t){t.dismiss===a.$swal.DismissReason.timer&&a.$swal({icon:"info",title:"Gracias por tu trabajo",text:"Ya no existe ninguna acta para registar los votos!"})}))},showWarning:function(t){var a=this;this.$swal({icon:"warning",title:t,allowOutsideClick:!1,text:"POR FAVOR INFORMA ÉSTE PROBLEMA A UN ADMINISTRADOR",footer:"Por favor informa éste problema a un administrador ",confirmButtonText:"Ok"}).then((function(t){t.isConfirmed?(a.$refs.frmVotos.reset(),a.fetchJunta()):t.isDenied&&a.$swal("Changes are not saved","","info")}))}}},r=e("KHd+"),n=Object(r.a)(s,(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"grid place-items-center box-main "},[e("div",{staticClass:"container mx-auto"},[t._m(0),t._v(" "),e("div",{staticClass:"container max-auto "},[e("div",{staticClass:"bg-blanco rounded overflow-hidden shadow-lg min-w-[80%]"},[e("div",{staticClass:"pt-4 pb-10"},[e("form",{ref:"frmVotos",staticClass:"w-full",on:{submit:function(a){return a.preventDefault(),t.addVoto(a)}}},[e("div",{staticClass:"grid lg:grid-cols-2 gap-4"},[e("div",{staticClass:"min-w-[50%] pl-2 flex items-center"},[e("figure",{staticClass:"max-w-lg m-auto w-full"},[e("img",{staticClass:"rounded-lg max-h-[500px]",attrs:{src:t.acta?t.acta.imagenOriginalURL:"no-imagen-acta.jpg",height:"224px",alt:""}}),t._v(" "),t.acta.imagenOriginalURL?t._e():e("figcaption",{staticClass:"mt-2 text-sm text-center text-gray-500 dark:text-gray-400"},[t._v("Vista previa de la imagen del acta")])])]),t._v(" "),e("div",{staticClass:"min-w-[50%] pr-2 px-2"},[e("div",{staticClass:"text-negro underline font-bold decoration-negro pb-4"},[e("h2",{},[t._v("\r\n                                        ACTA  "),t.acta?e("span",[t._v(t._s(t.acta.codigo))]):t._e()])]),t._v(" "),e("div",{staticClass:"container mx-auto pb-4"},[e("table",{staticClass:"w-full text-sm text-left"},[t._m(1),t._v(" "),e("tbody",[e("tr",{staticClass:"bg-white border-blanco dark:bg-blanco dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 hover:bg-[#bdbdbd40] dark:hover:text-negro"},[e("td",{staticClass:"border border-curren"},[t._v("Total de Votantes")]),t._v(" "),e("td",{staticClass:"border border-curren w-8"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.acta.tv_1,expression:"acta.tv_1"}],staticClass:"w-full border border-[#ffffff] bg-white px py-1 text-base font-medium text-negro outline-none focus:border-plomo-light focus:shadow-md",attrs:{type:"text",min:"0",max:"1",oninput:"this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\\..*)\\./g, '$1');",placeholder:"0"},domProps:{value:t.acta.tv_1},on:{input:[function(a){a.target.composing||t.$set(t.acta,"tv_1",a.target.value)},t.calcularTotalVotantes]}})]),t._v(" "),e("td",{staticClass:"border border-curren w-8"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.acta.tv_2,expression:"acta.tv_2"}],staticClass:"w-full border border-[#ffffff] bg-white px py-1 text-base font-medium text-negro outline-none focus:border-plomo-light focus:shadow-md",attrs:{type:"text",min:"0",max:"1",oninput:"this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\\..*)\\./g, '$1');",placeholder:"0"},domProps:{value:t.acta.tv_2},on:{input:[function(a){a.target.composing||t.$set(t.acta,"tv_2",a.target.value)},t.calcularTotalVotantes]}})]),t._v(" "),e("td",{staticClass:"border border-curren w-8"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.acta.tv_3,expression:"acta.tv_3"}],staticClass:"w-full border border-[#ffffff] bg-white px py-1 text-base font-medium text-negro outline-none focus:border-plomo-light focus:shadow-md",attrs:{type:"text",min:"0",max:"1",oninput:"this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\\..*)\\./g, '$1');",placeholder:"0"},domProps:{value:t.acta.tv_3},on:{input:[function(a){a.target.composing||t.$set(t.acta,"tv_3",a.target.value)},t.calcularTotalVotantes]}})])]),t._v(" "),e("tr",{staticClass:"bg-white border-blanco dark:bg-blanco dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 hover:bg-[#bdbdbd40] dark:hover:text-blanco"},[e("td",{staticClass:"border border-curren"},[t._v("Votos Blancos")]),t._v(" "),e("td",{staticClass:"border border-curren w-8"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.acta.vb_1,expression:"acta.vb_1"}],staticClass:"w-full border border-[#ffffff] bg-white px py-1 text-base font-medium text-negro outline-none focus:border-plomo-light focus:shadow-md",attrs:{type:"text",min:"0",max:"1",oninput:"this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\\..*)\\./g, '$1');",placeholder:"0"},domProps:{value:t.acta.vb_1},on:{input:[function(a){a.target.composing||t.$set(t.acta,"vb_1",a.target.value)},t.calcularTotalBlancos]}})]),t._v(" "),e("td",{staticClass:"border border-curren w-8"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.acta.vb_2,expression:"acta.vb_2"}],staticClass:"w-full border border-[#ffffff] bg-white px py-1 text-base font-medium text-negro outline-none focus:border-plomo-light focus:shadow-md",attrs:{type:"text",min:"0",max:"1",oninput:"this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\\..*)\\./g, '$1');",placeholder:"0"},domProps:{value:t.acta.vb_2},on:{input:[function(a){a.target.composing||t.$set(t.acta,"vb_2",a.target.value)},t.calcularTotalBlancos]}})]),t._v(" "),e("td",{staticClass:"border border-curren w-8"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.acta.vb_3,expression:"acta.vb_3"}],staticClass:"w-full border border-[#ffffff] bg-white px py-1 text-base font-medium text-negro outline-none focus:border-plomo-light focus:shadow-md",attrs:{type:"text",min:"0",max:"1",oninput:"this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\\..*)\\./g, '$1');",placeholder:"0"},domProps:{value:t.acta.vb_3},on:{input:[function(a){a.target.composing||t.$set(t.acta,"vb_3",a.target.value)},t.calcularTotalBlancos]}})])]),t._v(" "),e("tr",{staticClass:"bg-white border-blanco dark:bg-blanco dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 hover:bg-[#bdbdbd40] dark:hover:text-blanco"},[e("td",{staticClass:"border border-curren"},[t._v("Votos Nulos")]),t._v(" "),e("td",{staticClass:"border border-curren w-8"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.acta.vn_1,expression:"acta.vn_1"}],staticClass:"w-full border border-[#ffffff] bg-white px py-1 text-base font-medium text-negro outline-none focus:border-plomo-light focus:shadow-md",attrs:{type:"text",min:"0",max:"1",oninput:"this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\\..*)\\./g, '$1');",placeholder:"0"},domProps:{value:t.acta.vn_1},on:{input:[function(a){a.target.composing||t.$set(t.acta,"vn_1",a.target.value)},t.calcularTotalNulos]}})]),t._v(" "),e("td",{staticClass:"border border-curren w-8"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.acta.vn_2,expression:"acta.vn_2"}],staticClass:"w-full border border-[#ffffff] bg-white px py-1 text-base font-medium text-negro outline-none focus:border-plomo-light focus:shadow-md",attrs:{type:"text",min:"0",max:"1",oninput:"this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\\..*)\\./g, '$1');",placeholder:"0"},domProps:{value:t.acta.vn_2},on:{input:[function(a){a.target.composing||t.$set(t.acta,"vn_2",a.target.value)},t.calcularTotalNulos]}})]),t._v(" "),e("td",{staticClass:"border border-curren w-8"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.acta.vn_3,expression:"acta.vn_3"}],staticClass:"w-full border border-[#ffffff] bg-white px py-1 text-base font-medium text-negro outline-none focus:border-plomo-light focus:shadow-md",attrs:{type:"text",min:"0",max:"1",oninput:"this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\\..*)\\./g, '$1');",placeholder:"0"},domProps:{value:t.acta.vn_3},on:{input:[function(a){a.target.composing||t.$set(t.acta,"vn_3",a.target.value)},t.calcularTotalNulos]}})])])])])]),t._v(" "),e("div",{staticClass:"grid"},[e("div",{staticClass:"text-red-700"},[t.infoVotosValidos?e("h3",{staticClass:"text-red-700 text-sm"},[t._v(t._s(t.infoVotosValidos))]):t._e()]),t._v(" "),e("table",{staticClass:"w-full text-sm text-left"},[t._m(2),t._v(" "),e("tbody",t._l(t.candidatos,(function(a,o){return e("tr",{key:a.id,staticClass:"bg-white border-blanco dark:bg-blanco dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 hover:bg-[#bdbdbd40] dark:hover:text-negro"},[e("td",{staticClass:"border border-curren"},[t._v(t._s(a.nombre))]),t._v(" "),e("td",{staticClass:"border border-curren w-8"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.candidatos_votos[o].v_1,expression:"candidatos_votos[index].v_1"}],staticClass:"w-full border border-[#ffffff] bg-white px py-1 text-base font-medium text-negro outline-none focus:border-plomo-light focus:shadow-md",attrs:{type:"text",min:"0",max:"1",oninput:"this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\\..*)\\./g, '$1');",placeholder:"0"},domProps:{value:t.candidatos_votos[o].v_1},on:{input:[function(a){a.target.composing||t.$set(t.candidatos_votos[o],"v_1",a.target.value)},function(a){return t.calcularVotoCandidato(o)}]}})]),t._v(" "),e("td",{staticClass:"border border-curren w-8"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.candidatos_votos[o].v_2,expression:"candidatos_votos[index].v_2"}],staticClass:"w-full border border-[#ffffff] bg-white px py-1 text-base font-medium text-negro outline-none focus:border-plomo-light focus:shadow-md",attrs:{type:"text",min:"0",max:"1",oninput:"this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\\..*)\\./g, '$1');",placeholder:"0"},domProps:{value:t.candidatos_votos[o].v_2},on:{input:[function(a){a.target.composing||t.$set(t.candidatos_votos[o],"v_2",a.target.value)},function(a){return t.calcularVotoCandidato(o)}]}})]),t._v(" "),e("td",{staticClass:"border border-curren w-8"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.candidatos_votos[o].v_3,expression:"candidatos_votos[index].v_3"}],staticClass:"w-full border border-[#ffffff] bg-white px py-1 text-base font-medium text-negro outline-none focus:border-plomo-light focus:shadow-md",attrs:{type:"text",min:"0",max:"1",oninput:"this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\\..*)\\./g, '$1');",placeholder:"0"},domProps:{value:t.candidatos_votos[o].v_3},on:{input:[function(a){a.target.composing||t.$set(t.candidatos_votos[o],"v_3",a.target.value)},function(a){return t.calcularVotoCandidato(o)}]}})])])})),0)])]),t._v(" "),e("div",{staticClass:"flex justify-center pt-5 w-full"},[t.acta.id?[e("button",{class:"flex justify-center w-32 border-solid border border-negro rounded-xl bg-negro hover:bg-plomo"+(t.processing?" bg-plomo":" bg-negro"),attrs:{type:"submit",disabled:t.processing}},[e("span",{staticClass:"py-1 text-blanco"},[t._v(" GUARDAR ")]),t._v(" "),t.processing?e("span",{staticClass:"py-1 px-2 text-blanco"},[e("svg",{staticClass:"h-6 w-6 text-white animate-spin",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"}},[e("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"}})])]):t._e()])]:[e("alert",{attrs:{type:"info",description:"No existe ninguna acta para registar los votos! Gracias por tu trabajo"}})]],2)])])])])])])])])}),[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"container max-auto text-negro text-xl pt-[78px] pl-4"},[a("h1",{staticClass:"text-negro underline font-bold decoration-negro"},[this._v("\r\n                REGISTRO DE VOTOS\r\n            ")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("thead",{staticClass:"text-xs text-negro uppercase bg-plomo-light"},[a("tr",{staticClass:"bg-plomo-light"},[a("th",{staticClass:"py-1"}),this._v(" "),a("th",{staticClass:"py-1 text-center whitespace-nowrap",attrs:{colspan:"3"}},[this._v("TOTAL EN NÚMEROS")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("thead",{staticClass:"text-xs text-negro uppercase bg-plomo-light"},[a("tr",{staticClass:"bg-plomo-light"},[a("th",{staticClass:"py-1"},[this._v("CANDIDATO")]),this._v(" "),a("th",{staticClass:"py-1 text-center whitespace-nowrap",attrs:{colspan:"3"}},[this._v("TOTAL EN NÚMEROS")])])])}],!1,null,null,null);a.default=n.exports},z80y:function(t,a,e){"use strict";var o={components:{},props:{type:{type:String,requiere:!0},description:{type:String,requiere:!0}},data:function(){return{color:""}},computed:{title:function(){var t="";switch(this.type){case"error":this.color="error",t="Error";break;case"info":this.color="info",t="Info";break;default:this.color="warning",t="Warning"}return t}}},s=e("KHd+"),r=Object(s.a)(o,(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{class:"bg-"+t.color+" border border-"+t.color+" text-"+t.color+"-700 px-4 py-3 rounded relative",attrs:{role:"alert"}},[e("strong",{staticClass:"font-bold"},[t._v(t._s(t.title)+"!")]),t._v(" "),e("input",{staticClass:"bg-error bg-info bg-warning",attrs:{type:"hidden"}}),t._v(" "),e("span",{staticClass:"block sm:inline"},[t._v(t._s(t.description))]),t._v(" "),e("span",{staticClass:"absolute top-0 bottom-0 right-0 px-4 py-3"},[e("svg",{class:"fill-current h-6 w-6 text-"+t.color+"-500",attrs:{role:"button",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"}},[e("title",[t._v("Close")]),e("path",{attrs:{d:"M14.348 14.849a1.2 1.2 0 0 1-1.697 0L10 11.819l-2.651 3.029a1.2 1.2 0 1 1-1.697-1.697l2.758-3.15-2.759-3.152a1.2 1.2 0 1 1 1.697-1.697L10 8.183l2.651-3.031a1.2 1.2 0 1 1 1.697 1.697l-2.758 3.152 2.758 3.15a1.2 1.2 0 0 1 0 1.698z"}})])])])}),[],!1,null,null,null);a.a=r.exports}}]);